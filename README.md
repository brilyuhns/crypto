# Usage

Ensure you have ruby installed. Known to work with versions 2.7, 3.0 on Macbook Air M1 running Big Sur. YMMV
```
ruby -v 
```

Incase you don't have bundler ...
```
gem install bundler
```

Install dependencies
```
bundle install
```

Run
```
ruby crypto.rb coinhako.csv binance.json 
```

## Coinhako

* Login to coinhako.com
* Goto "Trade History" page ( https://www.coinhako.com/wallet/history/trade ) 
* Download CSV and save as `coinhako.csv`

## Binance SG

* Login to binance.sg
* Goto "History -> Buy/Sell" ( https://www.binance.sg/en/usercenter/history/buysell )
* Open dev tools (Cmd + Shift + I)
* Copy the response of the API call https://www.binance.sg/gateway-api/v1/private/ocbs/get-user-payment-history
* Save it as `binance.json`

## Gemini

* WIP

## Sample Output

```
----------------------------------------- DOGE / SGD -------------------------------------------

┌────────────────────────────────────────────────────────────────────────┐
│                                  Buys                                  │
├──────────┬────────────────────┬──────┬────────────────┬────────────────┤
│ Exchange │ DOGE               │ SGD  │ Fee            │ # Transactions │
╞══════════╪════════════════════╪══════╪════════════════╪════════════════╡
│ Coinhako │ 457.82819910337173 │ 32.0 │ 0.24 ( 0.75% ) │ 1              │
└──────────┴────────────────────┴──────┴────────────────┴────────────────┘

Average Buy price: 0.06989521410579345

┌───────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                               Notable Buys                                                │
├───────────────────────┬─────────────────────────────────┬──────────┬──────┬──────────┬────────────────────┤
│ Type                  │ Time                            │ Exchange │ SGD  │ Rate     │ DOGE               │
╞═══════════════════════╪═════════════════════════════════╪══════════╪══════╪══════════╪════════════════════╡
│ Lowest Rate           │ Fri, 19 Feb 2021 00:35:00 +0800 │ Coinhako │ 32.0 │ 0.069371 │ 457.82819910337173 │
│ Highest Rate          │ Fri, 19 Feb 2021 00:35:00 +0800 │ Coinhako │ 32.0 │ 0.069371 │ 457.82819910337173 │
│ Most Recent           │ Fri, 19 Feb 2021 00:35:00 +0800 │ Coinhako │ 32.0 │ 0.069371 │ 457.82819910337173 │
│ Most Crypto Obtained  │ Fri, 19 Feb 2021 00:35:00 +0800 │ Coinhako │ 32.0 │ 0.069371 │ 457.82819910337173 │
│ Least Crypto Obtained │ Fri, 19 Feb 2021 00:35:00 +0800 │ Coinhako │ 32.0 │ 0.069371 │ 457.82819910337173 │
└───────────────────────┴─────────────────────────────────┴──────────┴──────┴──────────┴────────────────────┘
┌─────────────────────────────────────────────────────────────────────────────┐
│                                    Sells                                    │
├──────────┬────────────────────┬───────┬────────────────────┬────────────────┤
│ Exchange │ DOGE               │ SGD   │ Fee                │ # Transactions │
╞══════════╪════════════════════╪═══════╪════════════════════╪════════════════╡
│ Coinhako │ 457.82819910337173 │ 39.68 │ 0.2998488561502645 │ 1              │
└──────────┴────────────────────┴───────┴────────────────────┴────────────────┘

Average Sell price: 0.08667006549118388

┌──────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                              Notable Sells                                               │
├─────────────────────┬─────────────────────────────────┬──────────┬────────────────────┬──────────┬───────┤
│ Type                │ Time                            │ Exchange │ SGD                │ Rate     │ DOGE  │
╞═════════════════════╪═════════════════════════════════╪══════════╪════════════════════╪══════════╪═══════╡
│ Lowest Rate         │ Thu, 01 Apr 2021 20:11:00 +0800 │ Coinhako │ 457.82819910337173 │ 0.087325 │ 39.68 │
│ Highest Rate        │ Thu, 01 Apr 2021 20:11:00 +0800 │ Coinhako │ 457.82819910337173 │ 0.087325 │ 39.68 │
│ Most Recent         │ Thu, 01 Apr 2021 20:11:00 +0800 │ Coinhako │ 457.82819910337173 │ 0.087325 │ 39.68 │
│ Most Fiat Obtained  │ Thu, 01 Apr 2021 20:11:00 +0800 │ Coinhako │ 457.82819910337173 │ 0.087325 │ 39.68 │
│ Least Fiat Obtained │ Thu, 01 Apr 2021 20:11:00 +0800 │ Coinhako │ 457.82819910337173 │ 0.087325 │ 39.68 │
└─────────────────────┴─────────────────────────────────┴──────────┴────────────────────┴──────────┴───────┘

Total DOGE owned: 0.0 ( Bought: 457.82819910337173, Sold: 457.82819910337173)

----------------------------------------- ETH / SGD -------------------------------------------

┌─────────────────────────────────────────────────────────────────────────────┐
│                                    Buys                                     │
├────────────┬─────────────────────┬───────┬─────────────────┬────────────────┤
│ Exchange   │ ETH                 │ SGD   │ Fee             │ # Transactions │
╞════════════╪═════════════════════╪═══════╪═════════════════╪════════════════╡
│ Binance Sg │ 0.09069             │ 224.0 │ 1.33 ( 0.594% ) │ 7              │
│ Coinhako   │ 0.21818011371868812 │ 464.0 │ 4.32 ( 0.931% ) │ 14             │
╞════════════╪═════════════════════╪═══════╪═════════════════╪════════════════╡
│ TOTAL      │ 0.3088701137186881  │ 688.0 │ 5.65 ( 0.821% ) │ 21             │
└────────────┴─────────────────────┴───────┴─────────────────┴────────────────┘

Average Buy price: 2227.473521852667

┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                 Notable Buys                                                 │
├───────────────────────┬─────────────────────────────────┬────────────┬──────┬─────────┬──────────────────────┤
│ Type                  │ Time                            │ Exchange   │ SGD  │ Rate    │ ETH                  │
╞═══════════════════════╪═════════════════════════════════╪════════════╪══════╪═════════╪══════════════════════╡
│ Lowest Rate           │ Sun, 18 Apr 2021 11:16:51 +0800 │ Binance Sg │ 32.0 │ 2953.13 │ 0.01077              │
│ Highest Rate          │ Mon, 01 Feb 2021 08:38:00 +0800 │ Coinhako   │ 32.0 │ 1712.2  │ 0.018502511388856443 │
│ Most Recent           │ Fri, 29 Jan 2021 12:59:00 +0800 │ Coinhako   │ 32.0 │ 1744.81 │ 0.018156704741490476 │
│ Most Crypto Obtained  │ Mon, 01 Feb 2021 08:38:00 +0800 │ Coinhako   │ 32.0 │ 1712.2  │ 0.018502511388856443 │
│ Least Crypto Obtained │ Sun, 18 Apr 2021 11:16:51 +0800 │ Binance Sg │ 32.0 │ 2953.13 │ 0.01077              │
└───────────────────────┴─────────────────────────────────┴────────────┴──────┴─────────┴──────────────────────┘

Total ETH owned: 0.3088701137186881 ( Bought: 0.3088701137186881, Sold: 0)

```